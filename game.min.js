const GRAVITY=.8,VELOCITY={x:0,y:5},x_player_html=document.getElementById("player_x"),y_player_html=document.getElementById("player_y"),plateform_x=document.getElementById("plateform_x"),img1=new Image,img2=new Image,img3=new Image,img4=new Image,img5=new Image,img6=new Image,img7=new Image,img8=new Image,img9=new Image,img10=new Image;img1.src="./idle/Idle(1).png",img2.src="./idle/Idle(2).png",img3.src="./idle/Idle(3).png",img4.src="./idle/Idle(4).png",img5.src="./idle/Idle(5).png",img6.src="./idle/Idle(6).png",img7.src="./idle/Idle(7).png",img8.src="./idle/Idle(8).png",img9.src="./idle/Idle(9).png",img10.src="./idle/Idle(10).png";var player_images=[img1,img2,img3,img4,img5,img6,img7,img8,img9,img10];const imgrun1=new Image,imgrun2=new Image,imgrun3=new Image,imgrun4=new Image,imgrun5=new Image,imgrun6=new Image,imgrun7=new Image,imgrun8=new Image;imgrun1.src="./run/Run(1).png",imgrun2.src="./run/Run(2).png",imgrun3.src="./run/Run(3).png",imgrun4.src="./run/Run(4).png",imgrun5.src="./run/Run(5).png",imgrun6.src="./run/Run(6).png",imgrun7.src="./run/Run(7).png",imgrun8.src="./run/Run(8).png";var player_run_images=[imgrun1,imgrun1,imgrun1,imgrun1,imgrun2,imgrun2,imgrun2,imgrun2,imgrun3,imgrun3,imgrun3,imgrun3,imgrun4,imgrun4,imgrun4,imgrun4,imgrun5,imgrun5,imgrun5,imgrun5,imgrun6,imgrun6,imgrun6,imgrun6,imgrun7,imgrun7,imgrun7,imgrun7,imgrun8,imgrun8,imgrun8,imgrun8];const cloud_image=new Image;cloud_image.src="./cloud.png";const player_image=new Image;player_image.src="./player.png";const plateform1_image=new Image;plateform1_image.src="./plateform1.png";const background_image=new Image;background_image.src="./background.png";const lnflag=new Image;let audio;lnflag.src="./flag2.png";let GAME_OVER=!1,audio_over=new Audio("./over.mp3");const keyPress={RightKey:!1,LeftKey:!1};class Plateforms{constructor(e,r,a=9,i=300,t=200){this.x=e,this.y=r,this.width=i,this.height=t,this.object_id=a}draw(e){e.drawImage(plateform1_image,60,133,780,300,this.x,this.y,this.width,this.height)}update(e){this.draw(e),1==this.object_id&&(plateform_x.innerHTML=this.x,e.font="20px Georgia",e.fillText("Distance: "+-1*(this.x-400),GAME.width-200,50))}}class BackgroundAsset{constructor(e,r,a=0){this.x=e,this.y=r,this.height=50,this.width=250,this.object_id=a}draw(e){e.drawImage(cloud_image,0,0,530,280,this.x,this.y,150,75)}update(e){this.draw(e),1==this.object_id&&(plateform_x.innerHTML=this.x)}}class LnWebFlag{constructor(e,r,a=0){this.x=e,this.y=r,this.height=10,this.width=10,this.object_id=a}draw(e){e.drawImage(lnflag,0,0,2e3,2e3,this.x,this.y,400,400)}update(e){this.draw(e),1==this.object_id&&(plateform_x.innerHTML=this.x)}}class BackgroundFull{constructor(e,r,a=0){this.x=e,this.y=r,this.height=50,this.width=250,this.object_id=a}draw(e){e.drawImage(background_image,50,50,1600,1900,this.x,this.y,1600,1900)}update(e){this.draw(e),1==this.object_id&&(plateform_x.innerHTML=this.x)}}class Player{constructor(e,r){this.x=e,this.y=r,this.height=100,this.width=100,this.frame=0,this.player_state="player_images",this.frame_list=[[30,5,300,511],[30,5,300,511],[30,5,300,511],[30,5,300,511],[30,5,300,511],[30,5,300,511],[30,5,300,511],[30,5,300,511],[30,5,300,511],[330,5,230,511],[330,5,230,511],[330,5,230,511],[330,5,230,511],[330,5,230,511],[330,5,230,511],[330,5,230,511],[330,5,230,511],[330,5,230,511],[600,5,230,511],[600,5,230,511],[600,5,230,511],[600,5,230,511],[600,5,230,511],[600,5,230,511],[600,5,230,511],[600,5,230,511],[600,5,230,511],[830,5,230,511],[830,5,230,511],[830,5,230,511],[830,5,230,511],[830,5,230,511],[830,5,230,511],[830,5,230,511],[830,5,230,511],[830,5,230,511],[1080,5,280,511],[1080,5,280,511],[1080,5,280,511],[1080,5,280,511],[1080,5,280,511],[1080,5,280,511],[1080,5,280,511],[1080,5,280,511],[1080,5,280,511],[1350,5,280,511],[1350,5,280,511],[1350,5,280,511],[1350,5,280,511],[1350,5,280,511],[1350,5,280,511],[1350,5,280,511],[1350,5,280,511],[1350,5,280,511]]}draw(e){this.frame_list[this.frame],e.drawImage(window[this.player_state][this.frame],30,30,600,470,this.x,this.y,this.width,this.height),this.frame++,this.frame==window[this.player_state].length&&(this.frame=0)}update(e){this.draw(e),this.y>-51?this.y+=VELOCITY.y:this.y=-50,this.x+=VELOCITY.x,x_player_html.innerHTML=this.x,y_player_html.innerHTML=this.y,this.y+this.height+VELOCITY.y<=GAME.height+player.height?VELOCITY.y+=.8:VELOCITY.y=0}}let plateform_stay=[],plateforms=[],backgrounds=[],backgroundsfull=[],lnflags=[];const init=()=>{GAME_OVER=!1,backgrounds=[new BackgroundAsset(100,100),new BackgroundAsset(500,50),new BackgroundAsset(300,30),new BackgroundAsset(800,10),new BackgroundAsset(1200,40),new BackgroundAsset(1500,80),new BackgroundAsset(1700,90),new BackgroundAsset(1900,120),new BackgroundAsset(2100,150)],backgroundsfull=[new BackgroundFull(0,0),new BackgroundFull(1200,0),new BackgroundFull(2600,0)],plateforms=[new Plateforms(50,400,0),new Plateforms(400,450,1),new Plateforms(700,200,2),new Plateforms(900,500,3),new Plateforms(1320,200,4),new Plateforms(1700,550,5),new Plateforms(1900,460,7),new Plateforms(2400,460,8),new Plateforms(2800,460,9),new Plateforms(3200,550,10),new Plateforms(3700,400,11,30,150),new Plateforms(3900,400,12,60,150),new Plateforms(4200,400,13,30,150),new Plateforms(4600,550,14)],lnflags=[new LnWebFlag(4600,175,0)],plateform_stay=plateforms.map(((e,r)=>0==r)),console.log({plateform_stay:plateform_stay}),player=new Player(100,-200)},KEY_DOWN=40,KEY_UP=38,KEY_RIGHT=39,KEY_LEFT=37,KEY_DOWN_S=84,KEY_UP_W=87,KEY_RIGHT_D=68,KEY_LEFT_A=65,GAME={height:700,width:1600};window.onload=()=>{var e=document.getElementById("myCanvas"),r=e.getContext("2d");e.width=GAME.width,e.height=GAME.height;const a=()=>{r.clearRect(0,0,e.width,e.height),backgroundsfull.forEach((e=>{e.update(r)})),backgrounds.forEach((e=>{e.update(r)})),plateforms.forEach((e=>{e.update(r)})),lnflags.forEach((e=>{e.update(r)})),player.update(r),GAME_OVER||(player.y>=GAME.height-player.height&&(null!=audio_over&&(audio.pause(),audio_over.play(),audio.currentTime=0),GAME_OVER=!0,setTimeout((()=>{audio_over.pause(),audio_over.currentTime=0,init()}),3e3)),keyPress.RightKey?(player.player_state="player_run_images",player.x<600?VELOCITY.x=3:VELOCITY.x=0,plateforms.forEach((e=>{e.x-=5})),lnflags.forEach((e=>{e.x-=5})),backgrounds.forEach((e=>{e.x-=2.5})),backgroundsfull.forEach((e=>{e.x-=2.5}))):keyPress.LeftKey?(player.player_state="player_run_images",player.x>0?VELOCITY.x=-3:VELOCITY.x=0,plateforms.forEach((e=>{e.x+=5})),backgrounds.forEach((e=>{e.x+=2.5})),lnflags.forEach((e=>{e.x+=5}))):(player.player_state="player_images",VELOCITY.x=0),plateforms.forEach((e=>{player.height+player.y<=e.y&&player.width+(player.x-20)>e.x&&player.height+player.y+VELOCITY.y>=e.y&&player.x+40<e.x+e.width?(plateform_stay[e.object_id]=!0,VELOCITY.y=0):plateform_stay[e.object_id]=!1}))),requestAnimationFrame(a)};init(),a(),window.onkeydown=e=>{e.preventDefault(),40==e.keyCode||e.keyCode,38!=e.keyCode&&87!=e.keyCode||(console.log({plateform_stay:plateform_stay}),null!=plateform_stay.find((e=>1==e))&&(VELOCITY.y=-20)),39!=e.keyCode&&68!=e.keyCode||(keyPress.RightKey=!0,null==audio&&0==GAME_OVER?((audio=new Audio("mario_audio.mp3")).loop=!0,audio.play()):0==GAME_OVER&&audio.play()),37!=e.keyCode&&65!=e.keyCode||(keyPress.LeftKey=!0)},window.onkeyup=e=>{e.preventDefault(),40!=e.keyCode&&84!=e.keyCode||(player.frame=0),38!=e.keyCode&&87!=e.keyCode||(VELOCITY.y=0,player.frame=0),39!=e.keyCode&&68!=e.keyCode||(keyPress.RightKey=!1,player.frame=0),37!=e.keyCode&&65!=e.keyCode||(keyPress.LeftKey=!1,player.frame=0)}};